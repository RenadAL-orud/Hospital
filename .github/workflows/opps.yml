name: JMeter Tests

on:
  push

jobs:
  jmeter_test:
    runs-on: ubuntu-latest

    steps:
      # Checkout the code
      - name: Checkout code
        uses: actions/checkout@v2

      # Set up Java 8 (using AdoptOpenJDK)
      - name: Set up Java 8
        uses: actions/setup-java@v2
        with:
          java-version: '8'
          distribution: 'adoptopenjdk' 
    

      # Run JMeter Test
      - name: Run JMeter Test
 # Install JMeter
      - name: Install JMeter
        run: |
          # Download JMeter
          wget https://dlcdn.apache.org/jmeter/binaries/apache-jmeter-5.6.3.tgz
          # Extract JMeter
          tar -xvzf apache-jmeter-5.6.3.tgz
          # Move JMeter to a directory for easy access
          sudo mv apache-jmeter-5.6.3 /opt/jmeter
          # Add JMeter to PATH for ease of use
          echo 'export JMETER_HOME=/opt/jmeter' >> $GITHUB_ENV
          echo 'export PATH=$JMETER_HOME/bin:$PATH' >> $GITHUB_ENV
          
      # Verify JMeter installation and list contents
      - name: Check JMeter installation
        run: |
          # Check if JMeter is installed correctly and list contents
          jmeter --version
          ls -l $JMETER_HOMErun: |
          jmeter -n -t "C:\Users\ribraheem\Downloads\apache-jmeter-5.6.3\apache-jmeter-5.6.3\bin\BlazedDemo -Test\HTTP Request -reserve.php .jmx" -l result.jtl
